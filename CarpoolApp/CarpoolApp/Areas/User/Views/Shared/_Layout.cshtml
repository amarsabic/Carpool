@using Microsoft.AspNetCore.Identity
@inject SignInManager<Korisnik> SignInManager
@inject UserManager<Korisnik> UserManager
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/korisnickiProfil.css" asp-append-version="true" />
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif !important;
            font-weight: 300 !important;
        }
    </style>
</head>
<body>
<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="spremiForma" method="post">
                    <div class="form-group">
                        <label>Broj vozačke dozvole</label>
                        <input name="BrojVozackeDozvole" id="BrojVozackeDozvole" type="text" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label>Datum isteka vozačke dozvole</label>
                        <input name="DatumIstekaDozvole" id="DatumIstekaDozvole" type="date" class="form-control" />
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="close" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button onclick="Spremi()" type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>
<a style="visibility: hidden; position:absolute" asp-action="Detalji" asp-controller="Automobil" asp-area="Driver" id="goToVozac" >Link</a>
<script>
    function Spremi() {
        var form = $("#spremiForma");

        $.ajax({
            type: "POST",
            url: "Profil/SnimiVozaca",
            data: form.serialize(),
            success: function (res) {
                $("#close").click();
                if (res) {
                    alert("Uspješno ste se registrovali kao vozač !");
                    
                }
                $('a#goToVozac')[0].click();
            }
        });
    }
</script>
    
<div class="profilKorisnik">
            @if (SignInManager.IsSignedIn(User))
            {
                <div class="footer">
                    <a href="#"><img src="~/usericon2.png" id="imgAmar" alt=""></a>
                 
                        <a style="display: block;" class="text-light" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">Dobrodošli @User.Identity.Name!</a>
                    <li>
                        <form  class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                            <button style="border-radius: 50px; margin:0 auto;" type="submit" class="nav-link btn btn-link text-light btn-danger">Odjavi se</button>
                        </form>
                    </li>
                    <div class="footer-last">
                        <ul class="links_lastFooter">
                            <li> <a asp-area="" asp-controller="Home" asp-action="Index">CarpoolApp</a></li>
                            <p>|</p>
                            <li><a style="display: block;" class="text-light" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">Uredi profil</a></li>
                            <p>|</p>
                            <li><a href="#education-title">Historija vožnji</a></li>
                            <p>|</p>
                            <li><a style="border-radius: 50px; margin-top: -7px;" class="btn btn-primary"  href="#skill-title" data-toggle="modal" data-target="#exampleModalCenter" type="button">Postani vozač</a></li>
                        </ul>
                    </div>
                </div>

            }
        </div>
        @*<div class="container">
                <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">CarpoolApp AREA</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse">
                    <partial name="_LoginPartial" />
                </div>
            </div>*@
   
   

    @*<div class="container">
            <main role="main" class="pb-3">

            </main>
        </div>*@

    @RenderBody()

    @if (!ViewData["Title"].Equals("Prijavi se") && !ViewData["Title"].Equals("Registracija"))
    {
        <footer class="border-top footer text-muted" style="background-color: #edf0f1;">
            <div class="container">
                &copy; 2019 - CarpoolApp - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
            </div>

        </footer>
    }
    else
    {
        <style>
            body {
                margin-bottom: 0px !important;
            }
        </style>
    }
    <script src="~/lib/jquery/dist/jquery.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js" asp-append-version="true"></script>
    <script src="~/js/mojJs.js" asp-append-version="true"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
